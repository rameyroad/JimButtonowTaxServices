# Transcript Analyzer - Docker Environment Configuration
# Copy this file to .env and customize as needed
# cp .env.template .env

# =============================================================================
# Port Configuration
# =============================================================================

# .NET API (5100 to avoid macOS AirPlay conflict on port 5000)
API_PORT=5100

# Next.js Frontend
WEB_PORT=3000

# PostgreSQL
POSTGRES_PORT=5432

# Redis
REDIS_PORT=6379

# Seq Logging
SEQ_UI_PORT=8081
SEQ_INGESTION_PORT=5341

# Azurite (Azure Storage Emulator)
AZURITE_BLOB_PORT=10000
AZURITE_QUEUE_PORT=10001
AZURITE_TABLE_PORT=10002

# Dev Tools (optional - tools profile only)
PGADMIN_PORT=5050
REDIS_COMMANDER_PORT=8082

# =============================================================================
# Database Configuration
# =============================================================================

# PostgreSQL Settings
POSTGRES_USER=postgres
POSTGRES_PASSWORD=YourStrong@Passw0rd
POSTGRES_DB=transcript_analyzer

# Admin connection for RLS bypass (maintenance operations)
# POSTGRES_ADMIN_USER=transcript_admin
# POSTGRES_ADMIN_PASSWORD=AdminStrong@Passw0rd

# =============================================================================
# Azure PostgreSQL (Production)
# =============================================================================
# Azure Database for PostgreSQL Flexible Server connection settings
#
# Connection String Format:
# Host=<server-name>.postgres.database.azure.com;Port=5432;Database=transcript_analyzer;Username=<user>;Password=<password>;SSLMode=Require;Trust Server Certificate=true;Pooling=true;MinPoolSize=1;MaxPoolSize=100
#
# Required Parameters:
#   - SSLMode=Require (Azure enforces SSL connections)
#   - Trust Server Certificate=true (for Azure-managed certificates)
#
# Recommended Connection Pooling:
#   - Pooling=true (enabled by default)
#   - MinPoolSize=1 (minimum connections to maintain)
#   - MaxPoolSize=100 (adjust based on Azure tier limits)
#   - Connection Idle Lifetime=300 (seconds before idle connections are closed)
#
# Azure Tier Limits (Flexible Server):
#   - Burstable B1ms: 50 connections
#   - Burstable B2s: 100 connections
#   - General Purpose D2s_v3: 859 connections
#   - Memory Optimized E2s_v3: 1719 connections
#
# Environment Variables for Production:
# POSTGRES_HOST=myserver.postgres.database.azure.com
# POSTGRES_USER=appuser@myserver
# POSTGRES_PASSWORD=<secure-password>
# POSTGRES_ADMIN_USER=adminuser@myserver
# POSTGRES_ADMIN_PASSWORD=<admin-secure-password>

# =============================================================================
# Authentication Configuration
# =============================================================================

# Set to true to bypass Auth0 for local development
USE_DEV_AUTH=true

# Auth0 Settings (required if USE_DEV_AUTH=false)
AUTH0_DOMAIN=your-tenant.auth0.com
AUTH0_AUDIENCE=https://api.transcript-analyzer.com
AUTH0_CLIENT_ID=your-client-id
AUTH0_CLIENT_SECRET=your-client-secret

# =============================================================================
# Security Configuration
# =============================================================================

# Encryption key for PII data (generate with: openssl rand -base64 32)
ENCRYPTION_KEY=your-base64-encoded-key-here

# Seq Admin Password
SEQ_ADMIN_PASSWORD=admin

# pgAdmin Credentials
PGADMIN_EMAIL=admin@local.dev
PGADMIN_PASSWORD=admin

# =============================================================================
# Email Configuration (optional)
# =============================================================================

EMAIL_PROVIDER=SendGrid
EMAIL_TEST_MODE=true
SENDGRID_API_KEY=
SENDGRID_FROM_EMAIL=noreply@your-domain.com

# =============================================================================
# Application Settings
# =============================================================================

# Platform admin user (seeded on startup)
PLATFORM_ADMIN_EMAIL=admin@local.dev
PLATFORM_ADMIN_FIRST_NAME=Admin
PLATFORM_ADMIN_LAST_NAME=User
